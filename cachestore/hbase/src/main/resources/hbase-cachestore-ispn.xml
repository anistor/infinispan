<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ JBoss, Home of Professional Open Source
  ~ Copyright 2012 Red Hat Inc. and/or its affiliates and other
  ~ contributors as indicated by the @author tags. All rights reserved.
  ~ See the copyright.txt in the distribution for a full listing of
  ~ individual contributors.
  ~
  ~ This is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ This software is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this software; if not, write to the Free
  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.
  -->

<infinispan
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="urn:infinispan:config:5.2 http://www.infinispan.org/schemas/infinispan-config-5.2.xsd"
      xmlns="urn:infinispan:config:5.2">
      
    <!-- *************************** -->
    <!-- System-wide global settings -->
    <!-- *************************** -->

    <global>
        <!-- If the transport is omitted, there is no way to create distributed or clustered 
            caches. There is no added cost to defining a transport but not creating a cache that uses one, 
            since the transport is created and initialized lazily. -->
        <transport
            clusterName="HBase-Backed-Infinispan-Cluster"
            distributedSyncTimeout="50000">
            <!-- Note that the JGroups transport uses sensible defaults if no configuration 
                property is defined. See the JGroupsTransport javadocs for more flags -->
        </transport>
        
    </global>

	<default>
      <clustering mode="distribution">
          <stateTransfer fetchInMemoryState="false" logFlushTimeout="30000" />
          <sync replTimeout="25000" />
      </clustering>
	  <eviction strategy="LIRS" maxEntries="10" />
	  <loaders passivation="false" shared="true" preload="false">
	     <loader class="org.infinispan.loaders.hbase.HBaseCacheStore" 
	             fetchPersistentState="true" 
	             purgerThreads="3" 
	             purgeSynchronously="false" 
	             ignoreModifications="false" 
	             purgeOnStartup="false">
	        <properties>
	           <property name="hbaseZookeeperQuorum" value="localhost"/>
	           <property name="hbaseZookeeperPropertyClientPort" value="2181"/>
	           <property name="entryTable" value="ISPNCacheStore"/>
	           <property name="entryColumnFamily" value="E"/>
	           <property name="entryValueField" value="EV"/>
	           <property name="expirationTable" value="ISPNCacheStoreExpiration"/>
	           <property name="expirationColumnFamily" value="X"/>
	           <property name="expirationValueField" value="XV"/>
	           <property name="sharedTable" value="true"/>
	        </properties>
	        <singletonStore enabled="false" pushStateWhenCoordinator="true" pushStateTimeout="20000"/>
	        <!--async enabled="true" flushLockTimeout="15000" threadPoolSize="5"/-->
	     </loader>
	  </loaders>
	</default>    

</infinispan>
